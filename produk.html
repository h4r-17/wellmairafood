<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Products - Well Maira Food</title>
    <meta name="description" content="Menyatukan gurih, renyah, manis, aku dan kamu!">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>

    <!-- Header Section -->
    <header class="header">
        <nav class="navbar">
            <div class="container">
                <div class="nav-wrapper">
                    <div class="logo">
                        <a href="index.html"><img src="assets/logo-maira.png" alt=" Well Maira Food Logo" class="logo-image"></a>
                    </div>
                    <ul class="nav-menu">
                        <li><a href="index.html" data-i18n="nav_home">Beranda</a></li>
                        <li><a href="about.html" data-i18n="nav_about">Tentang Kami</a></li>
                        <li><a href="produk.html" data-i18n="nav_product">Produk</a></li>
                        <li><a href="where-buy.html" data-i18n="nav_buy">Tempat Beli</a></li>
                        
                        <li class="lang-switch">
                        <button class="lang-btn" onclick="setLanguage('id')">IND</button>
                        <button class="lang-btn" onclick="setLanguage('en')">ENG</button>
                        </li>
                    </ul>
                    <div class="hamburger">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <!-- Main Section -->
    <section class="products-page">
        <div class="container">
            <h2 data-i18n="main-produk">Maira Crispy - Main Product</h2>
            
            <div id="main-product" class="products-grid">
                <!-- Crispy Macaron 35gr -->
                <div class="product-card">
                    <div class="product-image">
                        <img src="assets/crispy macaron 30gr.png" alt="Macaron Well Maira">
                    </div>
                    <div class="product-info">
                        <h3>Crispy Macaron 35gr</h3>
                        <p data-i18n="crispy-macaron">Crafted with the same ingredients and aunthentic flavors of traditional French Macarons, a delicate blend of almond flour, egg whites, and other premium components. Elegantly packaged for your convenience, offering a delightful balance of savory, sweet and crisp texture. 
                            A perfect blend of you, me, and happiness!</p>
                        <div class="button-group">
                            <a href="https://www.tokopedia.com/mairacrispymacaron/kue-kering-crispy-macaron-35g-original?extParam=src%3Dshop%26whid%3D11780823&aff_unique_id=&channel=others&chain_key=" class="cta-button" data-i18n="cek-button1">Cek di Tokopedia</a>
                            <a href="https://shopee.co.id/Maira-Crispy-Macaron-35g-Tanpa-Pengawet-i.81008666.7286006733" class="cta-button" data-i18n="cek-button2">Cek di Shopee</a>
                        </div>
                    </div>
                </div>

                <!-- Crispy Macaron 45gr -->
                <div class="product-card">
                    <div class="product-image">
                        <img src="assets/45gr.png" alt="Crispy Macaron 45gr">
                    </div>
                    <div class="product-info">
                        <h3>Crispy Macaron 45gr</h3>
                        <p data-i18n="crispy-macaron">Crafted with the same ingredients and aunthentic flavors of traditional French Macarons, a delicate blend of almond flour, egg whites, and other premium components. Elegantly packaged for your convenience, offering a delightful balance of savory, sweet and crisp texture. 
                            A perfect blend of you, me, and happiness!</p>
                        <div class="button-group">
                            <a href="https://www.tokopedia.com/mairacrispymacaron/kue-kering-crispy-macaron-45g?extParam=src%3Dshop%26whid%3D11780823&aff_unique_id=&channel=others&chain_key=" class="cta-button" data-i18n="cek-button1">Cek di Tokopedia</a>
                            <a href="https://shopee.co.id/Maira-Cookies-Crispy-Macaron-45g-Tanpa-Pengawet-i.81008666.9142587768" class="cta-button" data-i18n="cek-button2">Cek di Shopee</a>
                        </div>
                    </div>
                </div>

                <!-- Krispi Macana -->
                <div class="product-card">
                    <div class="product-image">
                        <img src="assets/crispy macana 5gr.png" alt="Krispi Macana">
                    </div>
                    <div class="product-info">
                        <h3>Krispi Macana 5gr</h3>
                        <p data-i18n="krispi-macana">Macana or Macaron Kacang Tanah. Crafted with the same ingredients and authentic flavors as traditional French Macarons. Made with Indonesian Peanuts, it brings unique taste of Indonesia thats savory, sweet with crisp texture. 
                            Available in a single serving package, perfect for your convenience.</p>
                        <div class="button-group">
                            <a href="https://www.tokopedia.com/mairacrispymacaron/krispi-macana?extParam=src%3Dshop%26whid%3D11780823&aff_unique_id=&channel=others&chain_key=" class="cta-button" data-i18n="cek-button1">Cek di Tokopedia</a>
                            <a href="https://shopee.co.id/Maira-Cookies-Krispi-Macana-5g-Mini-Original-Tanpa-Bahan-Pengawet-i.81008666.19786539006" class="cta-button" data-i18n="cek-button2">Cek di Shopee</a>
                        </div>
                    </div>
                </div>

                <!-- Crispy Macaron Composite Can -->
                <div class="product-card">
                    <div class="product-image">
                        <img src="assets/cane original.png" alt="Composite Can">
                    </div>
                    <div class="product-info">
                        <h3>Crispy Macaron Composite Can</h3>
                        <p data-i18n="crispy-macaron">Crafted with the same ingredients and aunthentic flavors of traditional French Macarons, a delicate blend of almond flour, egg whites, and other premium components. 
                            Safely packaged for your convenience, offering a delightful balance of savory, sweet and crisp texture. A perfect blend of you, me, and happiness!</p>
                        <div class="button-group">
                            <a href="https://www.tokopedia.com/mairacrispymacaron/maira-crispy-macaron-composite-can?extParam=src%3Dshop%26whid%3D11780823&aff_unique_id=&channel=others&chain_key=" class="cta-button" data-i18n="cek-button1">Cek di Tokopedia</a>
                            <a href="https://shopee.co.id/Maira-Crispy-Macaron-Composite-Can-i.81008666.16738126071" class="cta-button" data-i18n="cek-button2">Cek di Shopee</a>
                        </div>
                    </div>
                </div>

                <!-- Crispy Macaron Palm Composite Can -->
                <div class="product-card">
                    <div class="product-image">
                        <img src="assets/palm cane.png" alt="Composite Palm Cane">
                    </div>
                    <div class="product-info">
                        <h3>Crispy Macaron Palm Composite Can</h3>
                        <p data-i18n="palm-can">Pampyron stands for Palm Crispy Macaron. Crafted with the same ingredients and authentic flavors as traditional French Macarons. Made with Indonesian Palm Sugar, it brings unique taste of Indonesia. 
                            Each bite-sized macaron offers a delightful balance of savory notes and authentic sweeetness from Indonesian Palm Sugar. Safely packaged for your convenience.</p>
                        <div class="button-group">
                            <a href="https://www.tokopedia.com/mairacrispymacaron/maira-crispy-macaron-palm-composite-can?extParam=src%3Dshop%26whid%3D11780823&aff_unique_id=&channel=others&chain_key=" class="cta-button" data-i18n="cek-button1">Cek di Tokopedia</a>
                            <a href="https://shopee.co.id/Maira-Crispy-Macaron-Palm-Composite-Can-i.81008666.16438221093" class="cta-button" data-i18n="cek-button2">Cek di Shopee</a>
                        </div>
                    </div>
                </div>

                <!-- Pampyron -->
                <div class="product-card">
                    <div class="product-image">
                        <img src="assets/pampiron.png" alt="Pampyron">
                    </div>
                    <div class="product-info">
                        <h3>Pampyron 50gr</h3>
                        <p data-i18n="pampyron">Pampyron stands for Palm Crispy Macaron. Crafted with the same ingredients and authentic flavors as traditional French Macarons. Made with Indonesian Palm Sugar, it brings unique taste of Indonesia. 
                            Each bite-sized macaron offers a delightful balance of savory notes and authentic sweeetness from Indonesian Palm Sugar.</p>
                        <div class="button-group">
                            <a href="https://www.tokopedia.com/mairacrispymacaron/kue-kering-pampyron-50gr?extParam=src%3Dshop%26whid%3D11780823&aff_unique_id=&channel=others&chain_key=" class="cta-button" data-i18n="cek-button1">Cek di Tokopedia</a>
                            <a href="https://shopee.co.id/Maira-Cookies-Pampyron-50g-Tanpa-Pengawet-i.81008666.23440842605" class="cta-button" data-i18n="cek-button2">Cek di Shopee</a>
                        </div>
                    </div>
                </div>
            </div>

    <!-- Cakes Product -->
                <div id="cakes-produk"  class="products-page">
                    <div>
                        <h2 data-i18n="cakes-produk">Maira Crispy - Cakes Product</h2>
                    </div>
                <div class="products-grid">
                        <!-- Crispy Macaron 100gr -->
                        <div class="product-card">
                        <div class="product-image">
                            <img src="assets/crispy macaron 300gr.png" alt="Crispy Macaron 100gr">
                        </div>
                        <div class="product-info">
                            <h3>Crispy Macaron 300gr</h3>
                            <p data-i18n="crispy-macaron">Macaron lembut dengan berbagai varian rasa yang menggugah selera. Terbuat dari bahan berkualitas tinggi tanpa pengawet.</p>
                            <div class="button-group">
                            <a href="https://www.tokopedia.com/mairacrispymacaron/kue-kering-crispy-macaron-toples-tinggi?extParam=src%3Dshop%26whid%3D11780823&aff_unique_id=&channel=others&chain_key=" class="cta-button" data-i18n="cek-button1">Cek di Tokopedia</a>
                            <a href="https://shopee.co.id/Macaroon-Crispy-i.81008666.5717166854" class="cta-button" data-i18n="cek-button2">Cek di Shopee</a>
                        </div>
                        </div>
                    </div>

                    <!-- Nastar -->
                    <div class="product-card">
                        <div class="product-image">
                        <img src="assets/nastar.png" alt="Toples Nastar">
                        </div>
                        <div class="product-info">
                            <h3>Nastar</h3>
                            <p data-i18n="nastar">Berbagai macam produk dalam kemasan 45gr yang praktis untuk dibawa bepergian atau camilan cepat saat lapar.</p>
                            <button class="cta-button add-to-cart" data-produk="Nastar" style="font-weight: 600; font-family: poppins;" data-i18n="order">Tambah ke Keranjang</button>
                        </div>
                    </div>

                    <!-- Florentine -->
                    <div class="product-card">
                        <div class="product-image">
                        <img src="assets/florentine.png" alt="Toples Florentine">
                        </div>
                        <div class="product-info">
                            <h3>Florentine</h3>
                            <p data-i18n="florentine">Berbagai macam produk dalam kemasan 45gr yang praktis untuk dibawa bepergian atau camilan cepat saat lapar.</p>
                            <button class="cta-button add-to-cart" data-produk="Florentine" style="font-weight: 600; font-family: poppins;" data-i18n="order">Tambah ke Keranjang</button>
                        </div>
                    </div>

                    <!-- Kastengel -->
                    <div class="product-card">
                        <div class="product-image">
                        <img src="assets/kaastengels.png" alt="Toples Kaastengels">
                        </div>
                        <div class="product-info">
                            <h3>Kaastengels</h3>
                            <p data-i18n="kastengel">Berbagai macam produk dalam kemasan 45gr yang praktis untuk dibawa bepergian atau camilan cepat saat lapar.</p>
                            <button class="cta-button add-to-cart" data-produk="Kaastengels" style="font-weight: 600; font-family: poppins;" data-i18n="order">Tambah ke Keranjang</button>
                        </div>
                    </div>

                    <!-- Putri Salju -->
                    <div class="product-card">
                        <div class="product-image">
                        <img src="assets/putri salju.png" alt=" Toples Putri Salju">
                        </div>
                        <div class="product-info">
                            <h3>Putri Salju</h3>
                            <p data-i18n="putrisalju">Berbagai macam produk dalam kemasan 45gr yang praktis untuk dibawa bepergian atau camilan cepat saat lapar.</p>
                            <button class="cta-button add-to-cart" data-produk="Putri Salju" style="font-weight: 600; font-family: poppins;" data-i18n="order">Tambah ke Keranjang</button>
                        </div>
                    </div>

                    <!-- Choco Butter Cookies -->
                    <div class="product-card">
                        <div class="product-image">
                        <img src="assets/choco dipped butter cookies.png" alt="Toples Choco Butter Cookies">
                        </div>
                        <div class="product-info">
                            <h3>Choco Dipped Butter Cookies</h3>
                            <p data-i18n="choco">Berbagai macam produk dalam kemasan 45gr yang praktis untuk dibawa bepergian atau camilan cepat saat lapar.</p>
                            <button class="cta-button add-to-cart" data-produk="Choco Dipped Butter" style="font-weight: 600; font-family: poppins;" data-i18n="order">Tambah ke Keranjang</button>
                        </div>
                    </div>

                    <!-- Peanut Cookies -->
                    <div class="product-card">
                        <div class="product-image">
                        <img src="assets/peanut cookies.png" alt="Toples Peanut Cookies">
                        </div>
                        <div class="product-info">
                            <h3>Peanut Cookies</h3>
                            <p data-i18n="peanut">Berbagai macam produk dalam kemasan 45gr yang praktis untuk dibawa bepergian atau camilan cepat saat lapar.</p>
                            <button class="cta-button add-to-cart" data-produk="Peanut Cookies" style="font-weight: 600; font-family: poppins;" data-i18n="order">Tambah ke Keranjang</button>
                        </div>
                    </div>

                    <!-- Sagu Keju -->
                    <div class="product-card">
                        <div class="product-image">
                        <img src="assets/sagu keju.png" alt="Sagu Keju">
                        </div>
                        <div class="product-info">
                            <h3>Sagu Keju</h3>
                            <p data-i18n="sagukeju">Berbagai macam produk dalam kemasan 45gr yang praktis untuk dibawa bepergian atau camilan cepat saat lapar.</p>
                            <button class="cta-button add-to-cart" data-produk="Sagu Keju" style="font-weight: 600; font-family: poppins;" data-i18n="order">Tambah ke Keranjang</button>
                        </div>
                    </div>
                </div>
            </div>       
    </section>

 <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Well Maira Food</h3>
                    <p>Menyatukan gurih, renyah, manis, aku dan kamu!</p>
                    <div class="social-links">
                        <a href="https://www.facebook.com/crispymacaron.id/"><i class="fab fa-facebook"></i></a>
                        <a href="https://www.instagram.com/mairacrispymacaron/"><i class="fab fa-instagram"></i></a>
                        <a href="https://wa.me/6281122332222"><i class="fab fa-whatsapp"></i></a>
                        <a href="https://www.tiktok.com/@mairacrispymacaron"><i class="fab fa-tiktok"></i></a>
                    </div>
                </div>

                <div class="footer-section">
                    <h4 data-i18n="kontak-kami">Contact Us</h4>
                    <ul>
                        <li><a href="https://www.google.com/search?tbm=lcl&q=Villa+Maira+Cookies&rflfq=1&num=20&stick=H4sIAAAAAAAAAC2QPUoEQRCF2UAxdUcMOpoj1P9PbCwYmQ-y4uLAyO6NPIHn8hS-AZNuuqq6vvfe3e2YPFm8OpOaNYKTa9xbc7hEKrrmTDEe2HCFB1qMuymbUWUV5yYSMRYWLRFU05SkyqjSisrMDaRQfKJ0jwIpO31fq96oW5a1uP_DsoRaNIP3A7PVYwqiSK9MiCIjx2scJUAujyArdxXmcWT8wxipCxwUrO2g8DTWBCS1JZihSQmqSaOjQCbScnBaVRO2druMSCzGJMVBQLXg1IBDGZMVd0m2O1KRDOndvRO0eUunue-xWqEqiC0dwgtqJRm-gcI-hUiki2TThPdRLiS02yQuEic0fw6H38Pjy2n7Wk_zsl63-XpaLm8f8_t2-b6ZXs_ruszPy_myzE_b9nk-Xf8AJGPm_d0BAAA&rldimm=5712589770913661718#rlfi=hd:;si:5712589770913661718,l,ChNWaWxsYSBNYWlyYSBDb29raWVzWhcYASITdmlsbGEgbWFpcmEgY29va2llc5IBDWZvb2RfcHJvZHVjZXKqATwQATIfEAEiG1lZ8q2oIuPcd8MmGRQZ_HpP8AGqoXpamRbAmjIXEAIiE3ZpbGxhIG1haXJhIGNvb2tpZXM,y,76SwieBd1cM;mv:[[-6.8683008,107.7152698],[-7.0216737,107.5718804]]"><i class="fas fa-map-marker-alt"></i>Kp Pancurendang RT 01/05, Cikadut Cimenyan Kabupaten Bandung 40191 Jawa Barat</a></li>
                        <li><a href="https://wa.me/6281122332222"><i class="fas fa-phone"></i>6281122332222</a></li>
                        <li><a href="https://mail.google.com/mail/?view=cm&fs=1&to=wellmairafood.digital@gmail.com"><i class="fas fa-envelope"></i>wellmairafood.digital@gmail.com</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p data-i18n="footer_text">&copy; 2025 Well Maira Food. All rights reserved.</p>
            </div>
        </div>
    </footer>

<!-- Popup Keranjang Pre-Order -->
    <div id="cartPopup" class="popup-overlay">
        <div class="cart-popup-box">
            <h2 data-i18n="cart_title">Keranjang Pre-Order</h2>
        <div id="cartItems"></div>
        <form id="cartForm" class="form-group">
            <input type="text" id="nama" name="nama" data-i18n-placeholder="cart_name_placeholder" placeholder="Nama Lengkap" minlength="3" required>
            <input type="text" id="userPhone" name="userPhone" data-i18n-placeholder="cart_phone_placeholder" placeholder="Nomor Telepon" maxlength="13" pattern="[0-9]{10,13}" inputmode="numeric" oninput="this.value = this.value.replace(/[^0-9]/g, '')" required>
            <textarea id="alamat" name="alamat" data-i18n-placeholder="cart_address_placeholder" placeholder="Alamat Lengkap" rows="3" minlength="5" style="resize: none;"></textarea>
            <button type="submit" class="submit-btn" data-i18n="cart_submit">Kirim Pesanan</button>
            <button type="button" id="closeCart" class="submit-btn" style="background:#f44336; margin-top:10px;" data-i18n="cart_close">Tutup</button>
        </form>
        </div>
    </div>


    <script src="addition.js" defer></script>
    <script>

    // translate bahasa

    async function loadTranslations() {
    const res = await fetch("lang.json");
    return await res.json();
    }

    async function setLanguage(lang) {
    const translations = await loadTranslations();

  document.querySelectorAll("[data-i18n]").forEach(el => {
    const key = el.getAttribute("data-i18n");
    if (translations[lang] && translations[lang][key]) {
      el.textContent = translations[lang][key];
    }
  });

    // Untuk placeholder input & textarea
    document.querySelectorAll("[data-i18n-placeholder]").forEach(el => {
    const key = el.getAttribute("data-i18n-placeholder");
    if (translations[lang] && translations[lang][key]) {
      el.placeholder = translations[lang][key];
    }
  });

    localStorage.setItem("lang", lang);

  document.querySelectorAll(".lang-btn").forEach(btn => btn.classList.remove("active"));
  const activeBtn = document.querySelector(`.lang-btn[onclick="setLanguage('${lang}')"]`);
  if (activeBtn) activeBtn.classList.add("active");
}


    // Jalankan saat halaman dibuka
    document.addEventListener("DOMContentLoaded", () => {
    let savedLang = localStorage.getItem("lang");

    // default Indonesia jika belum ada
    if (!savedLang) savedLang = "id";

    setLanguage(savedLang);
    });

    // pop up pre-order
    document.addEventListener("DOMContentLoaded", () => {
  const cartPopup = document.getElementById("cartPopup");
  const cartItemsContainer = document.getElementById("cartItems");
  const closeCart = document.getElementById("closeCart");
  const cartForm = document.getElementById("cartForm");
  let cart = [];

function updateCartUI() {
  const cartItemsWrapper = document.getElementById("cartItems");
// Ambil bahasa dari localStorage, default ke 'id'
const lang = localStorage.getItem("lang") || "id";

if (cart.length === 0) {
  cartItemsWrapper.innerHTML = `
    <p style="text-align:center; color:#777;">
      ${lang === "id" ? "Keranjang kosong." : "Your cart is empty."}
    </p>
  `;
  cartItemsWrapper.style.maxHeight = "none";
  return;
}

  // Render produk ke dalam keranjang
  cartItemsWrapper.innerHTML = cart
    .map((item, index) => `
      <div class="cart-item">
        <span>${item.name}</span>
        <div class="quantity-controls">
          <button onclick="decreaseQty(${index})">-</button>
          <input 
            type="number"
            value="${item.qty}"
            min="0"
            step="1"
            maxlength="4"
            pattern="[0-9]*"
            oninput="validateQty(this, ${index})"
          >
          <button onclick="increaseQty(${index})">+</button>
        </div>
        <button class="remove-btn" onclick="removeItem(${index})">Hapus</button>
      </div>
    `)
    .join("");

  // Aktifkan scroll jika produk > 4
  cartItemsWrapper.style.maxHeight = cart.length > 4 ? "300px" : "none";
}

// Fungsi validasi: mengizinkan 0, tapi tetap angka & maksimal 4 digit
window.validateQty = function(input, index) {
  // Hapus semua karakter non-angka
  input.value = input.value.replace(/[^0-9]/g, '');

  // Jika input kosong (misalnya user menghapus angka lama), set ke 0 sementara
  if (input.value === '') {
    cart[index].qty = 0;
    return;
  }

  // Batasi panjang maksimal ke 4 digit
  if (input.value.length > 4) {
    input.value = input.value.slice(0, 4);
  }

  // Update array cart
  cart[index].qty = parseInt(input.value, 10);
};

  // Tombol tambah produk
  document.querySelectorAll(".add-to-cart").forEach(btn => {
btn.addEventListener("click", () => {
  const product = btn.getAttribute("data-produk");
  const existingItem = cart.find(item => item.name === product);

  if (existingItem) {
    existingItem.qty += 1;
  } else {
    cart.push({ name: product, qty: 1 });
  }

  // Normalisasi qty yang 0 menjadi 1 setiap kali popup dibuka
  cart = cart.map(item => ({
    ...item,
    qty: item.qty < 1 ? 1 : item.qty
  }));

  updateCartUI();

  cartPopup.classList.add("show");
  setTimeout(() => {
    cartPopup.querySelector(".cart-popup-box").classList.add("show");
  }, 10);
});
  });

  // Quantity controls
  window.decreaseQty = function (index) {
    if (cart[index].qty > 1) {
      cart[index].qty -= 1;
    } else {
      cart.splice(index, 1);
    }
    updateCartUI();
  };

  window.increaseQty = function (index) {
    cart[index].qty += 1;
    updateCartUI();
  };

  window.updateQty = function (index, value) {
    const qty = parseInt(value);
    cart[index].qty = (!isNaN(qty) && qty > 0) ? qty : 1;
    updateCartUI();
  };

  window.removeItem = function (index) {
    cart.splice(index, 1);
    updateCartUI();
  };

  // Tutup popup
  closeCart.addEventListener("click", () => {
    cartPopup.querySelector(".cart-popup-box").classList.remove("show");
    setTimeout(() => {
      cartPopup.classList.remove("show");
    }, 300);
  });

  // Kirim ke WhatsApp
cartForm.addEventListener("submit", async (e) => {
  e.preventDefault();
  const lang = localStorage.getItem("lang") || "id";
  const translations = await loadTranslations();

  // Cek apakah keranjang kosong
if (cart.length === 0) {
  alert(lang === "id" ? "Tambahkan produk terlebih dahulu!" : "Add products first!");
  return;
}

// Cek apakah ada produk dengan qty 0
const hasZeroQty = cart.some(item => item.qty < 1);
if (hasZeroQty) {
  alert(lang === "id" ? "Tambahkan produk terlebih dahulu!" : "Add products first!");
  return;
}

  // Normalisasi qty: jika ada produk dengan qty 0, ubah menjadi 1
cart = cart.map(item => ({
  ...item,
  qty: item.qty < 1 ? 1 : item.qty
}));

  const nama = document.getElementById("nama").value.trim();
  const userPhone = document.getElementById("userPhone").value.trim();
  const alamat = document.getElementById("alamat").value.trim();
  const shopNumber = "6281122332222"; // Nomor WhatsApp toko

  const productList = cart.map(item => `* ${item.name}: ${item.qty}`).join("\n");
  const message = lang === "id"
    ? `Halo, saya ingin memesan produk berikut:\n\n${productList}\n\nNama: ${nama}\nAlamat: ${alamat}`
    : `Hello, I would like to order the following products:\n\n${productList}\n\nName: ${nama}\nAddress: ${alamat}`;

  const encodedMessage = encodeURIComponent(message);
  const userAgent = navigator.userAgent || navigator.vendor || window.opera;
  let waLink = "";

  // === WA navigation ===
  if (/iPhone|iPad|iPod/i.test(userAgent)) {
    waLink = `https://wa.me/${shopNumber}?text=${encodedMessage}`;
    window.location.href = waLink; // langsung di-trigger
  } else if (/Macintosh/i.test(userAgent)) {
    waLink = `https://web.whatsapp.com/send?phone=${shopNumber}&text=${encodedMessage}`;
    window.open(waLink, "_blank");
  } else if (/Android/i.test(userAgent)) {
    waLink = `https://wa.me/${shopNumber}?text=${encodedMessage}`;
    window.open(waLink, "_blank");
  } else {
    waLink = `https://web.whatsapp.com/send?phone=${shopNumber}&text=${encodedMessage}`;
    window.open(waLink, "_blank");
  }

  // === Async save to Spreadsheet ===
  setTimeout(async () => {
    try {
      const formData = new FormData();
      formData.append("nama", nama);
      formData.append("alamat", alamat);
      formData.append("telepon", userPhone);
      formData.append("produk", productList);

      const res = await fetch("https://script.google.com/macros/s/AKfycbw54iRAjtKC0mS0nUOtP1CBrvggoTkx1L1EnoCGw-bl-kNP-icE91HH-u2nXxwseaS2DQ/exec", {
        method: "POST",
        body: formData
      });
      const data = await res.json();
      console.log("Spreadsheet Response:", data);
    } catch (error) {
      console.error("Spreadsheet error:", error);
    }
  });

  // --- Reset keranjang dan form setelah semua proses dimulai ---
  cartPopup.querySelector(".cart-popup-box").classList.remove("show");
  setTimeout(() => {
    cartPopup.classList.remove("show");
  }, 300);
  cart = [];
  updateCartUI();
  cartForm.reset();
  }, 500);
});
</script>
</body>
</html>



